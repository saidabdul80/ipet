import{b as I,ac as M,r as n,o as R,e as j,f as m,h as t,w as l,V as g,i as c,q as F,m as k,g as C,j as U,E as w,n as r,p as s,G as x,ad as G,P as L,t as f,s as T,W,v as H,k as J,af as K,ae as O,a9 as Q,T as X,aa as Y,a2 as p}from"./app-CJq9zEpr.js";const Z={class:"font-weight-bold"},h={class:"text-caption text-grey"},te={__name:"UnitList",setup(ee){const V=I(),{alert:D,confirm:N}=M(),y=n(!1),b=n(!1),u=n(!1),d=n(!1),_=n(""),A=n([]),B=[{title:"Unit",key:"name"},{title:"Description",key:"description"},{title:"Status",key:"is_active"},{title:"Actions",key:"actions",sortable:!1}],i=n({name:"",abbreviation:"",description:"",is_active:!0}),v=async()=>{y.value=!0;try{const o={search:_.value},e=await p.get("/api/units",{params:o});A.value=e.data.data||e.data}catch(o){console.error("Failed to load units:",o)}finally{y.value=!1}},$=()=>{d.value=!1,i.value={name:"",abbreviation:"",description:"",is_active:!0},u.value=!0},E=o=>{d.value=!0,i.value={...o},u.value=!0},S=()=>{u.value=!1},P=async()=>{b.value=!0;try{d.value?await p.put(`/api/units/${i.value.id}`,i.value):await p.post("/api/units",i.value),S(),v()}catch(o){console.error("Failed to save unit:",o),D("Failed to save unit")}finally{b.value=!1}},q=async o=>{if(await N(`Are you sure you want to delete ${o.name}?`))try{await p.delete(`/api/units/${o.id}`),v()}catch(a){console.error("Failed to delete unit:",a),D("Failed to delete unit")}};return R(()=>{v()}),(o,e)=>(m(),j("div",null,[t(F,null,{default:l(()=>[t(g,{cols:"12"},{default:l(()=>[...e[6]||(e[6]=[c("h1",{class:"text-h4 mb-4"},"Units of Measurement",-1)])]),_:1})]),_:1}),t(F,null,{default:l(()=>[t(g,{cols:"12",md:"8"},{default:l(()=>[t(k,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=a=>_.value=a),label:"Search units...","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:"",onInput:v},null,8,["modelValue"])]),_:1}),t(g,{cols:"12",md:"4",class:"text-right"},{default:l(()=>[w(V).hasPermission("create_units")?(m(),C(r,{key:0,color:"primary",onClick:$},{default:l(()=>[t(x,{left:""},{default:l(()=>[...e[7]||(e[7]=[s("mdi-plus",-1)])]),_:1}),e[8]||(e[8]=s(" Add Unit ",-1))]),_:1})):U("",!0)]),_:1})]),_:1}),t(T,null,{default:l(()=>[t(G,{headers:B,items:A.value,loading:y.value},{"item.name":l(({item:a})=>[c("div",null,[c("div",Z,f(a.name),1),c("div",h,f(a.abbreviation),1)])]),"item.is_active":l(({item:a})=>[t(L,{color:a.is_active?"success":"error",size:"small"},{default:l(()=>[s(f(a.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),"item.actions":l(({item:a})=>[w(V).hasPermission("update_units")?(m(),C(r,{key:0,icon:"",size:"small",onClick:z=>E(a),title:"Edit"},{default:l(()=>[t(x,null,{default:l(()=>[...e[9]||(e[9]=[s("mdi-pencil",-1)])]),_:1})]),_:1},8,["onClick"])):U("",!0),w(V).hasPermission("delete_units")?(m(),C(r,{key:1,icon:"",size:"small",onClick:z=>q(a),title:"Delete",color:"error"},{default:l(()=>[t(x,null,{default:l(()=>[...e[10]||(e[10]=[s("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])):U("",!0)]),_:1},8,["items","loading"])]),_:1}),t(Y,{modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=a=>u.value=a),"max-width":"500px",persistent:""},{default:l(()=>[t(T,null,{default:l(()=>[t(W,null,{default:l(()=>[s(f(d.value?"Edit Unit":"New Unit"),1)]),_:1}),t(H,null,{default:l(()=>[t(J,{ref:"form"},{default:l(()=>[t(k,{modelValue:i.value.name,"onUpdate:modelValue":e[1]||(e[1]=a=>i.value.name=a),label:"Unit Name *",variant:"outlined",rules:[a=>!!a||"Required"]},null,8,["modelValue","rules"]),t(k,{modelValue:i.value.abbreviation,"onUpdate:modelValue":e[2]||(e[2]=a=>i.value.abbreviation=a),label:"Abbreviation *",variant:"outlined",rules:[a=>!!a||"Required"]},null,8,["modelValue","rules"]),t(K,{modelValue:i.value.description,"onUpdate:modelValue":e[3]||(e[3]=a=>i.value.description=a),label:"Description",variant:"outlined",rows:"2"},null,8,["modelValue"]),t(O,{modelValue:i.value.is_active,"onUpdate:modelValue":e[4]||(e[4]=a=>i.value.is_active=a),label:"Active",color:"primary"},null,8,["modelValue"])]),_:1},512)]),_:1}),t(Q,null,{default:l(()=>[t(X),t(r,{onClick:S},{default:l(()=>[...e[11]||(e[11]=[s("Cancel",-1)])]),_:1}),t(r,{color:"primary",onClick:P,loading:b.value},{default:l(()=>[...e[12]||(e[12]=[s("Save",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{te as default};
