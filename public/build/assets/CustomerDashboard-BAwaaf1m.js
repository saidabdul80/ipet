import{a as B,b as D,r as N,o as L,e as c,f as p,h as t,w as l,V as u,i as s,t as r,E as v,q as g,s as n,v as i,W as b,p as o,j as P,au as h,J as E,K as F,P as W,n as x,G as O,I as $,M as w,Z as k,_ as y,a2 as T}from"./app-CJq9zEpr.js";const z={class:"text-h4 mb-4"},G={class:"text-h4"},M={class:"text-h4"},j={class:"text-h4"},q={class:"text-h4"},J={key:0,class:"text-center text-grey py-4"},Z={__name:"CustomerDashboard",setup(K){const I=B(),f=D(),m=N({total_orders:0,completed_orders:0,pending_orders:0,wallet_balance:0}),V=N([]),C=d=>new Intl.NumberFormat("en-NG").format(d),A=d=>({pending:"warning",confirmed:"info",processing:"primary",completed:"success",cancelled:"error"})[d]||"default",R=async()=>{try{const[d,e]=await Promise.all([T.get("/api/orders",{params:{customer_id:f.user.id,per_page:5}}),T.get(`/api/wallet/customers/${f.user.id}/balance`)]),a=d.data.data||d.data;V.value=a,m.value={total_orders:a.length,completed_orders:a.filter(_=>_.status==="completed").length,pending_orders:a.filter(_=>_.status==="pending").length,wallet_balance:e.data.balance}}catch(d){console.error("Failed to load dashboard data:",d)}},S=d=>{I.push(`/customer-portal/orders?order=${d.id}`)};return L(()=>{R()}),(d,e)=>(p(),c("div",null,[t(g,null,{default:l(()=>[t(u,{cols:"12"},{default:l(()=>{var a;return[s("h1",z,"Welcome, "+r((a=v(f).user)==null?void 0:a.name)+"!",1)]}),_:1})]),_:1}),t(g,null,{default:l(()=>[t(u,{cols:"12",md:"3"},{default:l(()=>[t(n,{color:"primary",dark:""},{default:l(()=>[t(i,null,{default:l(()=>[s("div",G,r(m.value.total_orders),1),e[0]||(e[0]=s("div",{class:"text-caption"},"Total Orders",-1))]),_:1})]),_:1})]),_:1}),t(u,{cols:"12",md:"3"},{default:l(()=>[t(n,{color:"success",dark:""},{default:l(()=>[t(i,null,{default:l(()=>[s("div",M,r(m.value.completed_orders),1),e[1]||(e[1]=s("div",{class:"text-caption"},"Completed Orders",-1))]),_:1})]),_:1})]),_:1}),t(u,{cols:"12",md:"3"},{default:l(()=>[t(n,{color:"warning",dark:""},{default:l(()=>[t(i,null,{default:l(()=>[s("div",j,r(m.value.pending_orders),1),e[2]||(e[2]=s("div",{class:"text-caption"},"Pending Orders",-1))]),_:1})]),_:1})]),_:1}),t(u,{cols:"12",md:"3"},{default:l(()=>[t(n,{color:"info",dark:""},{default:l(()=>[t(i,null,{default:l(()=>[s("div",q,"₦"+r(C(m.value.wallet_balance)),1),e[3]||(e[3]=s("div",{class:"text-caption"},"Wallet Balance",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{class:"mt-4"},{default:l(()=>[t(u,{cols:"12"},{default:l(()=>[t(n,null,{default:l(()=>[t(b,null,{default:l(()=>[...e[4]||(e[4]=[o("Recent Orders",-1)])]),_:1}),t(i,null,{default:l(()=>[t(h,null,{default:l(()=>[e[6]||(e[6]=s("thead",null,[s("tr",null,[s("th",null,"Order #"),s("th",null,"Date"),s("th",null,"Total"),s("th",null,"Status"),s("th",null,"Actions")])],-1)),s("tbody",null,[(p(!0),c(E,null,F(V.value,a=>(p(),c("tr",{key:a.id},[s("td",null,r(a.order_number),1),s("td",null,r(a.order_date),1),s("td",null,"₦"+r(C(a.total_amount)),1),s("td",null,[t(W,{color:A(a.status),size:"small"},{default:l(()=>[o(r(a.status),1)]),_:2},1032,["color"])]),s("td",null,[t(x,{size:"small",onClick:_=>S(a)},{default:l(()=>[...e[5]||(e[5]=[o("View",-1)])]),_:1},8,["onClick"])])]))),128))])]),_:1}),V.value.length===0?(p(),c("div",J," No recent orders ")):P("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{class:"mt-4"},{default:l(()=>[t(u,{cols:"12",md:"6"},{default:l(()=>[t(n,null,{default:l(()=>[t(b,null,{default:l(()=>[...e[7]||(e[7]=[o("Quick Actions",-1)])]),_:1}),t(i,null,{default:l(()=>[t(x,{block:"",color:"primary",class:"mb-2",to:"/customer-portal/place-order"},{default:l(()=>[t(O,{left:""},{default:l(()=>[...e[8]||(e[8]=[o("mdi-cart-plus",-1)])]),_:1}),e[9]||(e[9]=o(" Place New Order ",-1))]),_:1}),t(x,{block:"",color:"info",to:"/customer-portal/orders"},{default:l(()=>[t(O,{left:""},{default:l(()=>[...e[10]||(e[10]=[o("mdi-package-variant",-1)])]),_:1}),e[11]||(e[11]=o(" View All Orders ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(u,{cols:"12",md:"6"},{default:l(()=>[t(n,null,{default:l(()=>[t(b,null,{default:l(()=>[...e[12]||(e[12]=[o("Account Information",-1)])]),_:1}),t(i,null,{default:l(()=>[t($,null,{default:l(()=>[t(w,null,{default:l(()=>[t(k,null,{default:l(()=>[...e[13]||(e[13]=[o("Customer Type",-1)])]),_:1}),t(y,null,{default:l(()=>{var a;return[o(r(((a=v(f).user)==null?void 0:a.customer_type)||"Retail"),1)]}),_:1})]),_:1}),t(w,null,{default:l(()=>[t(k,null,{default:l(()=>[...e[14]||(e[14]=[o("Email",-1)])]),_:1}),t(y,null,{default:l(()=>{var a;return[o(r((a=v(f).user)==null?void 0:a.email),1)]}),_:1})]),_:1}),t(w,null,{default:l(()=>[t(k,null,{default:l(()=>[...e[15]||(e[15]=[o("Phone",-1)])]),_:1}),t(y,null,{default:l(()=>{var a;return[o(r(((a=v(f).user)==null?void 0:a.phone)||"N/A"),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}};export{Z as default};
