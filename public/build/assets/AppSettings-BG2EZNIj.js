import{r as p,ac as Q,d as G,o as X,g as Y,f as _,w as o,h as l,q as b,V as s,s as v,W as V,i as u,n as f,p as d,G as E,v as c,am as Z,al as j,ao as h,an as D,m as g,af as M,e as k,j as I,aA as R,J as ee,K as le,t as O,y as ae,a4 as oe,ae as te,aa as ne,a9 as ie,T as de,x as se,a2 as $}from"./app-BU2Ar5cD.js";import{_ as re}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ue={key:0,class:"mb-4 text-center"},me=["src"],ge={key:0,class:"mb-4 text-center"},pe=["src"],fe={key:0,class:"mb-4 text-center"},ve=["src"],ce={class:"d-flex align-center justify-space-between mb-2"},_e={class:"font-weight-medium"},Ve={class:"text-caption text-grey mt-1"},ye={key:0,class:"mb-4 text-center"},be=["src"],ke={key:0,class:"mb-4 text-center"},xe=["src"],we={__name:"AppSettings",setup(Ce){const P=p("general"),z=p(!1),N=p(!1),x=p(!1),m=p({}),{alert:w,confirm:W}=Q(),t=G({app_name:"",app_short_name:"",app_description:"",primary_color:"#1976D2",secondary_color:"#424242",accent_color:"#82B1FF",error_color:"#FF5252",info_color:"#2196F3",success_color:"#4CAF50",warning_color:"#FB8C00",login_layout:"split",login_title:"",login_subtitle:"",show_logo_on_login:!0,currency_symbol:"â‚¦",currency_code:"NGN",timezone:"Africa/Lagos",company_email:"",company_phone:"",company_address:"",company_website:""}),r=G({logo:null,logo_dark:null,favicon:null,login_background:null,login_side_image:null}),C=p(null),U=p(null),F=p(null),S=p(null),A=p(null),K=[{key:"primary_color",label:"Primary Color"},{key:"secondary_color",label:"Secondary Color"},{key:"accent_color",label:"Accent Color"},{key:"error_color",label:"Error Color"},{key:"info_color",label:"Info Color"},{key:"success_color",label:"Success Color"},{key:"warning_color",label:"Warning Color"}],q=[{title:"Split (Side Image)",value:"split"},{title:"Centered",value:"centered"},{title:"Background Image",value:"background"}],T=async()=>{try{const n=await $.get("/api/app-settings");m.value=n.data,Object.keys(t).forEach(e=>{n.data[e]!==void 0&&(t[e]=n.data[e])}),n.data.color_scheme&&(t.primary_color=n.data.color_scheme.primary,t.secondary_color=n.data.color_scheme.secondary,t.accent_color=n.data.color_scheme.accent,t.error_color=n.data.color_scheme.error,t.info_color=n.data.color_scheme.info,t.success_color=n.data.color_scheme.success,t.warning_color=n.data.color_scheme.warning)}catch(n){console.error("Failed to load settings:",n)}},B=n=>{const e=r[n];if(e){let a=null;if(Array.isArray(e)&&e.length>0?a=e[0]:e instanceof File&&(a=e),a){const y=new FileReader;y.onload=i=>{switch(n){case"logo":C.value=i.target.result;break;case"logo_dark":U.value=i.target.result;break;case"favicon":F.value=i.target.result;break;case"login_background":S.value=i.target.result;break;case"login_side_image":A.value=i.target.result;break}},y.readAsDataURL(a)}}},J=async()=>{var n,e;z.value=!0;try{const a=new FormData;Object.keys(t).forEach(i=>{t[i]!==null&&t[i]!==void 0&&(typeof t[i]=="boolean"?a.append(i,t[i]?"1":"0"):a.append(i,t[i]))}),Object.keys(r).forEach(i=>{r[i]&&(Array.isArray(r[i])&&r[i].length>0?a.append(i,r[i][0]):r[i]instanceof File&&a.append(i,r[i]))});const y=await $.post("/api/app-settings",a,{headers:{"Content-Type":"multipart/form-data"}});m.value=y.data.data,w("Settings saved successfully!"),Object.keys(r).forEach(i=>{r[i]=null}),C.value=null,U.value=null,F.value=null,S.value=null,A.value=null,await T()}catch(a){console.error("Failed to save settings:",a),w(((e=(n=a.response)==null?void 0:n.data)==null?void 0:e.message)||"Failed to save settings")}finally{z.value=!1}},L=async n=>{if(await W("Are you sure you want to delete this image?"))try{switch(await $.delete(`/api/app-settings/images/${n}`),await T(),n){case"logo":C.value=null;break;case"logo_dark":U.value=null;break;case"favicon":F.value=null;break;case"login_background":S.value=null;break;case"login_side_image":A.value=null;break}}catch(a){console.error("Failed to delete image:",a),w("Failed to delete image")}},H=async()=>{N.value=!0;try{await $.post("/api/app-settings/reset"),x.value=!1,await T(),w("Settings reset to defaults successfully!")}catch(n){console.error("Failed to reset settings:",n),w("Failed to reset settings")}finally{N.value=!1}};return X(()=>{T()}),(n,e)=>(_(),Y(se,{fluid:""},{default:o(()=>[l(b,null,{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[l(v,null,{default:o(()=>[l(V,{class:"d-flex justify-space-between align-center"},{default:o(()=>[e[38]||(e[38]=u("span",null,"App Settings",-1)),u("div",null,[l(f,{color:"warning",onClick:e[0]||(e[0]=a=>x.value=!0),class:"mr-2"},{default:o(()=>[l(E,{left:""},{default:o(()=>[...e[34]||(e[34]=[d("mdi-restore",-1)])]),_:1}),e[35]||(e[35]=d(" Reset to Defaults ",-1))]),_:1}),l(f,{color:"primary",onClick:J,loading:z.value},{default:o(()=>[l(E,{left:""},{default:o(()=>[...e[36]||(e[36]=[d("mdi-content-save",-1)])]),_:1}),e[37]||(e[37]=d(" Save Changes ",-1))]),_:1},8,["loading"])])]),_:1}),l(c,null,{default:o(()=>[l(Z,{modelValue:P.value,"onUpdate:modelValue":e[1]||(e[1]=a=>P.value=a),color:"primary"},{default:o(()=>[l(j,{value:"general"},{default:o(()=>[...e[39]||(e[39]=[d("General",-1)])]),_:1}),l(j,{value:"branding"},{default:o(()=>[...e[40]||(e[40]=[d("Branding",-1)])]),_:1}),l(j,{value:"colors"},{default:o(()=>[...e[41]||(e[41]=[d("Colors",-1)])]),_:1}),l(j,{value:"login"},{default:o(()=>[...e[42]||(e[42]=[d("Login Page",-1)])]),_:1}),l(j,{value:"company"},{default:o(()=>[...e[43]||(e[43]=[d("Company Info",-1)])]),_:1})]),_:1},8,["modelValue"]),l(h,{modelValue:P.value,"onUpdate:modelValue":e[31]||(e[31]=a=>P.value=a),class:"mt-6"},{default:o(()=>[l(D,{value:"general"},{default:o(()=>[l(b,null,{default:o(()=>[l(s,{cols:"12",md:"6"},{default:o(()=>[l(g,{modelValue:t.app_name,"onUpdate:modelValue":e[2]||(e[2]=a=>t.app_name=a),label:"Application Name",variant:"outlined","prepend-inner-icon":"mdi-application"},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(g,{modelValue:t.app_short_name,"onUpdate:modelValue":e[3]||(e[3]=a=>t.app_short_name=a),label:"Short Name / Acronym",variant:"outlined","prepend-inner-icon":"mdi-format-text"},null,8,["modelValue"])]),_:1}),l(s,{cols:"12"},{default:o(()=>[l(M,{modelValue:t.app_description,"onUpdate:modelValue":e[4]||(e[4]=a=>t.app_description=a),label:"Application Description",variant:"outlined",rows:"3"},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",md:"4"},{default:o(()=>[l(g,{modelValue:t.currency_symbol,"onUpdate:modelValue":e[5]||(e[5]=a=>t.currency_symbol=a),label:"Currency Symbol",variant:"outlined","prepend-inner-icon":"mdi-currency-ngn"},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",md:"4"},{default:o(()=>[l(g,{modelValue:t.currency_code,"onUpdate:modelValue":e[6]||(e[6]=a=>t.currency_code=a),label:"Currency Code",variant:"outlined","prepend-inner-icon":"mdi-cash"},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",md:"4"},{default:o(()=>[l(g,{modelValue:t.timezone,"onUpdate:modelValue":e[7]||(e[7]=a=>t.timezone=a),label:"Timezone",variant:"outlined","prepend-inner-icon":"mdi-clock-outline"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(D,{value:"branding"},{default:o(()=>[l(b,null,{default:o(()=>[l(s,{cols:"12",md:"6"},{default:o(()=>[l(v,{variant:"outlined"},{default:o(()=>[l(V,{class:"text-subtitle-1"},{default:o(()=>[...e[44]||(e[44]=[d("Logo (Light Mode)",-1)])]),_:1}),l(c,null,{default:o(()=>[C.value||m.value.logo_url?(_(),k("div",ue,[u("img",{src:C.value||m.value.logo_url,alt:"Logo",class:"preview-image"},null,8,me),l(f,{size:"small",color:"error",variant:"text",onClick:e[8]||(e[8]=a=>L("logo")),class:"mt-2"},{default:o(()=>[...e[45]||(e[45]=[d(" Remove ",-1)])]),_:1})])):I("",!0),l(R,{modelValue:r.logo,"onUpdate:modelValue":e[9]||(e[9]=a=>r.logo=a),label:"Upload Logo",accept:"image/png,image/jpeg,image/jpg,image/svg+xml","prepend-icon":"mdi-image",variant:"outlined",onChange:e[10]||(e[10]=a=>B("logo"))},null,8,["modelValue"]),e[46]||(e[46]=u("p",{class:"text-caption text-grey"},"Recommended: PNG or SVG, max 2MB",-1))]),_:1})]),_:1})]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(v,{variant:"outlined"},{default:o(()=>[l(V,{class:"text-subtitle-1"},{default:o(()=>[...e[47]||(e[47]=[d("Logo (Dark Mode)",-1)])]),_:1}),l(c,null,{default:o(()=>[U.value||m.value.logo_dark_url?(_(),k("div",ge,[u("img",{src:U.value||m.value.logo_dark_url,alt:"Dark Logo",class:"preview-image"},null,8,pe),l(f,{size:"small",color:"error",variant:"text",onClick:e[11]||(e[11]=a=>L("logo_dark")),class:"mt-2"},{default:o(()=>[...e[48]||(e[48]=[d(" Remove ",-1)])]),_:1})])):I("",!0),l(R,{modelValue:r.logo_dark,"onUpdate:modelValue":e[12]||(e[12]=a=>r.logo_dark=a),label:"Upload Dark Logo",accept:"image/png,image/jpeg,image/jpg,image/svg+xml","prepend-icon":"mdi-image",variant:"outlined",onChange:e[13]||(e[13]=a=>B("logo_dark"))},null,8,["modelValue"]),e[49]||(e[49]=u("p",{class:"text-caption text-grey"},"Recommended: PNG or SVG, max 2MB",-1))]),_:1})]),_:1})]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(v,{variant:"outlined"},{default:o(()=>[l(V,{class:"text-subtitle-1"},{default:o(()=>[...e[50]||(e[50]=[d("Favicon",-1)])]),_:1}),l(c,null,{default:o(()=>[F.value||m.value.favicon_url?(_(),k("div",fe,[u("img",{src:F.value||m.value.favicon_url,alt:"Favicon",class:"preview-image-small"},null,8,ve),l(f,{size:"small",color:"error",variant:"text",onClick:e[14]||(e[14]=a=>L("favicon")),class:"mt-2"},{default:o(()=>[...e[51]||(e[51]=[d(" Remove ",-1)])]),_:1})])):I("",!0),l(R,{modelValue:r.favicon,"onUpdate:modelValue":e[15]||(e[15]=a=>r.favicon=a),label:"Upload Favicon",accept:"image/x-icon,image/png","prepend-icon":"mdi-web",variant:"outlined",onChange:e[16]||(e[16]=a=>B("favicon"))},null,8,["modelValue"]),e[52]||(e[52]=u("p",{class:"text-caption text-grey"},"Recommended: ICO or PNG, 32x32px, max 512KB",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(D,{value:"colors"},{default:o(()=>[l(b,null,{default:o(()=>[l(s,{cols:"12"},{default:o(()=>[...e[53]||(e[53]=[u("p",{class:"text-subtitle-1 mb-4"},"Customize your application's color scheme",-1)])]),_:1}),(_(),k(ee,null,le(K,a=>l(s,{cols:"12",md:"6",lg:"4",key:a.key},{default:o(()=>[l(v,{variant:"outlined"},{default:o(()=>[l(c,null,{default:o(()=>[u("div",ce,[u("span",_e,O(a.label),1),u("div",{class:"color-preview",style:ae({backgroundColor:t[a.key]})},null,4)]),l(g,{modelValue:t[a.key],"onUpdate:modelValue":y=>t[a.key]=y,type:"color",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]),u("p",Ve,O(t[a.key]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),64))]),_:1})]),_:1}),l(D,{value:"login"},{default:o(()=>[l(b,null,{default:o(()=>[l(s,{cols:"12",md:"6"},{default:o(()=>[l(oe,{modelValue:t.login_layout,"onUpdate:modelValue":e[17]||(e[17]=a=>t.login_layout=a),items:q,label:"Login Page Layout",variant:"outlined","prepend-inner-icon":"mdi-page-layout-header"},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(te,{modelValue:t.show_logo_on_login,"onUpdate:modelValue":e[18]||(e[18]=a=>t.show_logo_on_login=a),label:"Show Logo on Login Page",color:"primary","hide-details":""},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(g,{modelValue:t.login_title,"onUpdate:modelValue":e[19]||(e[19]=a=>t.login_title=a),label:"Login Page Title",variant:"outlined","prepend-inner-icon":"mdi-format-title"},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(g,{modelValue:t.login_subtitle,"onUpdate:modelValue":e[20]||(e[20]=a=>t.login_subtitle=a),label:"Login Page Subtitle",variant:"outlined","prepend-inner-icon":"mdi-format-text"},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(v,{variant:"outlined"},{default:o(()=>[l(V,{class:"text-subtitle-1"},{default:o(()=>[...e[54]||(e[54]=[d("Background Image",-1)])]),_:1}),l(c,null,{default:o(()=>[S.value||m.value.login_background_url?(_(),k("div",ye,[u("img",{src:S.value||m.value.login_background_url,alt:"Background",class:"preview-image-wide"},null,8,be),l(f,{size:"small",color:"error",variant:"text",onClick:e[21]||(e[21]=a=>L("login_background")),class:"mt-2"},{default:o(()=>[...e[55]||(e[55]=[d(" Remove ",-1)])]),_:1})])):I("",!0),l(R,{modelValue:r.login_background,"onUpdate:modelValue":e[22]||(e[22]=a=>r.login_background=a),label:"Upload Background Image",accept:"image/png,image/jpeg,image/jpg","prepend-icon":"mdi-image",variant:"outlined",onChange:e[23]||(e[23]=a=>B("login_background"))},null,8,["modelValue"]),e[56]||(e[56]=u("p",{class:"text-caption text-grey"},"For 'background' layout. Recommended: 1920x1080px, max 5MB",-1))]),_:1})]),_:1})]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(v,{variant:"outlined"},{default:o(()=>[l(V,{class:"text-subtitle-1"},{default:o(()=>[...e[57]||(e[57]=[d("Side Image",-1)])]),_:1}),l(c,null,{default:o(()=>[A.value||m.value.login_side_image_url?(_(),k("div",ke,[u("img",{src:A.value||m.value.login_side_image_url,alt:"Side Image",class:"preview-image-wide"},null,8,xe),l(f,{size:"small",color:"error",variant:"text",onClick:e[24]||(e[24]=a=>L("login_side_image")),class:"mt-2"},{default:o(()=>[...e[58]||(e[58]=[d(" Remove ",-1)])]),_:1})])):I("",!0),l(R,{modelValue:r.login_side_image,"onUpdate:modelValue":e[25]||(e[25]=a=>r.login_side_image=a),label:"Upload Side Image",accept:"image/png,image/jpeg,image/jpg","prepend-icon":"mdi-image",variant:"outlined",onChange:e[26]||(e[26]=a=>B("login_side_image"))},null,8,["modelValue"]),e[59]||(e[59]=u("p",{class:"text-caption text-grey"},"For 'split' layout. Recommended: 1080x1920px, max 5MB",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(D,{value:"company"},{default:o(()=>[l(b,null,{default:o(()=>[l(s,{cols:"12",md:"6"},{default:o(()=>[l(g,{modelValue:t.company_email,"onUpdate:modelValue":e[27]||(e[27]=a=>t.company_email=a),label:"Company Email",type:"email",variant:"outlined","prepend-inner-icon":"mdi-email"},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(g,{modelValue:t.company_phone,"onUpdate:modelValue":e[28]||(e[28]=a=>t.company_phone=a),label:"Company Phone",variant:"outlined","prepend-inner-icon":"mdi-phone"},null,8,["modelValue"])]),_:1}),l(s,{cols:"12"},{default:o(()=>[l(M,{modelValue:t.company_address,"onUpdate:modelValue":e[29]||(e[29]=a=>t.company_address=a),label:"Company Address",variant:"outlined",rows:"3","prepend-inner-icon":"mdi-map-marker"},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(g,{modelValue:t.company_website,"onUpdate:modelValue":e[30]||(e[30]=a=>t.company_website=a),label:"Company Website",type:"url",variant:"outlined","prepend-inner-icon":"mdi-web"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(ne,{modelValue:x.value,"onUpdate:modelValue":e[33]||(e[33]=a=>x.value=a),"max-width":"500px"},{default:o(()=>[l(v,null,{default:o(()=>[l(V,null,{default:o(()=>[...e[60]||(e[60]=[d("Reset to Defaults?",-1)])]),_:1}),l(c,null,{default:o(()=>[...e[61]||(e[61]=[d(" This will reset all settings to their default values and delete all uploaded images. This action cannot be undone. ",-1)])]),_:1}),l(ie,null,{default:o(()=>[l(de),l(f,{onClick:e[32]||(e[32]=a=>x.value=!1)},{default:o(()=>[...e[62]||(e[62]=[d("Cancel",-1)])]),_:1}),l(f,{color:"warning",onClick:H,loading:N.value},{default:o(()=>[...e[63]||(e[63]=[d("Reset",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Se=re(we,[["__scopeId","data-v-840447c5"]]);export{Se as default};
